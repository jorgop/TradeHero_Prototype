<ion-header class="color-header">
    <ion-navbar  class="back-button" transparent>

        <button class="logout-btn" (click)="logout()" round ion-button>
            <ion-icon name="power"></ion-icon>
        </button>
        <button class="fixed-header-btn" (click)="goToAbout()" ion-button>
            <ion-icon name="information-circle"></ion-icon>
        </button>
        <button class="fixed-header-btn" ion-button>
            <ion-icon name="settings"></ion-icon>
        </button>
    </ion-navbar>
</ion-header>

<ion-content>


    <div class="square">
        <div class="main-container">
            <div class="top-container">Übersicht
            </div>
            <div class="bottom-container">
                <ion-fab left>
                    <button ion-fab color="light" class="shadow">
                        <ion-icon name="arrow-dropright"></ion-icon>
                    </button>
                    <ion-fab-list side="right">
                        <button class="shadow" (click)="goToScan()" ion-fab><ion-icon name="camera"></ion-icon></button>
                        <button class="shadow" (click)="goToProfile()" ion-fab><ion-icon name="person"></ion-icon></button>
                        <button class="shadow" (click)="goToContact()" ion-fab><ion-icon name="call"></ion-icon></button>
                    </ion-fab-list>
                </ion-fab>
            </div>
        </div>
    </div>



    <ion-refresher (ionRefresh)="actRefresh($event)">
        <ion-refresher-content pullingText="arrow-dropdown"
                               pullingText="Aktualisieren"
                               refreshingSpinner="circles"
                               refreshingText="wird aktualisiert...">
        </ion-refresher-content>
    </ion-refresher>
    <div>
    <ion-card *ngFor="let aggregate of aggregate">
        <ion-card-header>
            <section class="container">
                <div class="left-half">
                    <article>
                        <p>Eingereicht: {{aggregate.sumAll | number: '1.2-2': 'de'}} €</p>
                        <br>
                        <p>Offen: {{aggregate.sumOpen | number: '1.2-2': 'de' }} €</p>
                    </article>
                </div>
                <div class="right-half">
                    <article>
                        <p>Bewilligt: {{aggregate.sumClosed | number: '1.2-2': 'de' }} €</p>
                        <br>
                        <p>Abgelehnt: {{aggregate.sumDenied | number: '1.2-2': 'de' }} €</p>
                    </article>
                </div>
            </section>
        </ion-card-header>
    </ion-card>
    </div>
    <!--<h2 align="center">Meine Rechnungen</h2>-->
    <div padding>
        <ion-segment [(ngModel)]="status" *ngFor="let aggregate of aggregate" color="royal">
            <ion-segment-button value="all" (click)="setStatus('all')">
                Alle ({{aggregate.countAll}})
            </ion-segment-button>
            <ion-segment-button value="open" (click)="setStatus('open')">
                Offen ({{aggregate.countOpen}})
            </ion-segment-button>
            <ion-segment-button value="paid" (click)="setStatus('paid')">
                Bezahlt ({{aggregate.countClosed}})
            </ion-segment-button>
            <ion-segment-button value="denied" (click)="setStatus('denied')">
                Abgelehnt ({{aggregate.countDenied}})
            </ion-segment-button>
        </ion-segment>
    </div>
    <div [ngSwitch]="status">
        <ion-list *ngSwitchCase="status" inset>
            <button ion-item *ngFor="let activity of activity" (click)="goToHistoryPage(activity.ticketID, activity.iconName, activity.cssClass)">
            <section class="container">
                <div class={{activity.cssClass}}>

                </div>
                <!--<ion-icon name={{activity.iconName}} class={{activity.cssClass}} item-left></ion-icon>-->
                <div class="actList">
                    Bearbeitungs-ID: {{activity.ticketID}} <br>
                    Datum: {{activity.date | date: 'dd.MM.yyyy' }} <br>
                    Status: {{activity.ticketStatus}}
                </div>
            </section>
            </button>
        </ion-list>
    </div>
</ion-content>
