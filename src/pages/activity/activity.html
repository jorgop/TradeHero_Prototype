<ion-header>
    <div>
        <ion-navbar hideBackButton>
            <ion-buttons left>
                <button ion-button (click)="goToHome()">
                    Home
                </button>
            </ion-buttons>
            <ion-title>Activity</ion-title>
        </ion-navbar>
    </div>
</ion-header>

<ion-content padding>
    <ion-refresher (ionRefresh)="actRefresh($event)">
        <ion-refresher-content pullingText="arrow-dropdown"
                               pullingText="Aktualisieren"
                               refreshingSpinner="circles"
                               refreshingText="wird aktualisiert...">
        </ion-refresher-content>
    </ion-refresher>
    <div>
    <ion-card *ngFor="let aggregate of aggregate">
        <ion-card-header>
            <section class="container">
                <div class="left-half">
                    <article>
                        <p>Eingereicht: {{aggregate.sumOpen}} €</p>
                        <br>
                        <p>Offen: {{aggregate.countOpen}}</p>
                    </article>
                </div>
                <div class="right-half">
                    <article>
                        <p>Bewilligt: {{aggregate.summClosed}} €</p>
                        <br>
                        <p>Bezahlt: {{aggregate.contClosed}}</p>
                    </article>
                </div>
            </section>
        </ion-card-header>
    </ion-card>
    </div>
    <h2 align="center">Meine Rechnungen</h2>
    <div>
        <ion-segment [(ngModel)]="status" *ngFor="let aggregate of aggregate" color="royal">
            <ion-segment-button value="all" (click)="setStatus('all')">
                Alle ({{aggregate.countAll}})
            </ion-segment-button>
            <ion-segment-button value="open" (click)="setStatus('open')">
                Offen ({{aggregate.countOpen}})
            </ion-segment-button>
            <ion-segment-button value="paid" (click)="setStatus('paid')">
                Bezahlt ({{aggregate.contClosed}})
            </ion-segment-button>
            <ion-segment-button value="denied" (click)="setStatus('denied')">
                Abgelehnt (2)
            </ion-segment-button>
        </ion-segment>
    </div>
    <div [ngSwitch]="status">
        <ion-list *ngSwitchCase="status" inset>
            <button ion-item *ngFor="let activity of activity" (click)="goToHistoryPage(activity.ticketID)">
            <section class="container">
                <div class={{activity.cssClass}}>

                </div>
                <!--<ion-icon name={{activity.iconName}} class={{activity.cssClass}} item-left></ion-icon>-->
                <div class="actList">
                    Bearbeitungs-ID: {{activity.ticketID}} <br>
                    Datum: {{activity.date | date: 'dd.MM.yyyy' }} <br>
                    Status: {{activity.ticketStatus}}
                </div>
            </section>
                 <!--<button ion-button outline item-end (click)="goToHistoryPage(activity.ticketID)">Mehr Infos!</button>-->
            </button>
        </ion-list>

    </div>
</ion-content>
