<ion-header class="color-header" xmlns="http://www.w3.org/1999/html">
  <ion-navbar  class="back-button" transparent>

    <button class="logout-btn" (click)="logout()" round ion-button>
      <ion-icon name="power"></ion-icon>
    </button>
    <button class="fixed-header-btn" (click)="goToImpressum()" ion-button>
      <ion-icon name="information-circle"></ion-icon>
    </button>
    <button class="fixed-header-btn" ion-button>
      <ion-icon name="settings"></ion-icon>
    </button>
  </ion-navbar>
</ion-header>


<ion-content padding>

  <ion-refresher (ionRefresh)="hisRefresh($event)">
    <ion-refresher-content pullingText="arrow-dropdown"
                           pullingText="Aktualisieren"
                           refreshingSpinner="circles"
                           refreshingText="wird aktualisiert...">
    </ion-refresher-content>
  </ion-refresher>




  <ion-card *ngFor="let history of history" class={{history.cardClass}} >


    <ion-card-header>
     <!-- <img src="{{ history.body }}"> -->
  <div [innerHtml]=history.head></div>
    </ion-card-header>


    <ion-card-content>
      <div [innerHtml]=history.body></div>
    </ion-card-content>
  </ion-card>


  <!-- timeline testing -->

  <div class="container">
    <h1 class="project-name">Bearbeitungs-ID {{ticketID}}</h1>

    <ion-card>
      <ion-card-header *ngFor="let historyHeader of historyHeader">
        Ticket-ID: {{ticketID}}
        <br>
        <div>
          Erstellt am: {{historyHeader.submitDate}}
        </div>
        <div *ngIf="historyHeader.endDate == null;else still_open">
          Abgeschlossen am: noch offen
        </div>
        <ng-template #still_open>Abgeschlossen am: {{historyHeader.endDate}}</ng-template>
        <div>
          Rechungsbetrag: {{historyHeader.refund | number: '1.2-2': 'de' }} â‚¬
        </div>
      </ion-card-header>
      <ion-card-content *ngFor="let historyHeader of historyHeader">
        <ion-item>
          <ion-thumbnail item-start (click)="showPhoto(historyHeader.imgFile)">
            <img src="{{historyHeader.imgFile}}" imageViewer/>
          </ion-thumbnail>
          <div >
            RechungsID: {{historyHeader.invoiceID}}
          </div>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <div id="timeline">
      <div [ngClass]="(this.ticket1.status == 'false') ? 'timeline-item ticket-hidden' : 'timeline-item ticket-visable'">
        <div [ngClass]=" 'timeline-icon ' + this.ticket1.status_color"></div>
        <div class="timeline-content">
          <h2>{{ticket1.head}}</h2>
          <div>
            <div>
              {{ticket1.body}}
            </div>
            <div>
              Start: {{ticket1.startDate}}
            </div>
            <div *ngIf="ticket1.endDate == null;else t1still_open">
              Abgeschlossen am: noch offen
            </div>
            <ng-template #t1still_open>Abgeschlossen am: {{ticket1.endDate}}</ng-template>
          </div>
        </div>
      </div>

      <div [ngClass]="(this.ticket2.status == 'false') ? 'timeline-item ticket-hidden' : 'timeline-item ticket-visable'">
        <div [ngClass]=" 'timeline-icon ' + this.ticket2.status_color"></div>
        <div class="timeline-content">
          <h2>{{ticket2.head}}</h2>
          <div>
            <div>
              {{ticket2.body}}
            </div>
            <div>
              Start: {{ticket2.startDate}}
            </div>
            <div *ngIf="ticket2.endDate == null;else t2still_open">
              Abgeschlossen am: noch offen
            </div>
            <ng-template #t2still_open>Abgeschlossen am: {{ticket2.endDate}}</ng-template>
          </div>
        </div>
      </div>

      <div [ngClass]="(this.ticket3.status == 'false') ? 'timeline-item ticket-hidden' : 'timeline-item ticket-visable'">
        <div [ngClass]=" 'timeline-icon ' + this.ticket3.status_color"></div>
        <div class="timeline-content">
          <h2>{{ticket3.head}}</h2>
          <div>
            <div>
              {{ticket3.body}}
            </div>
            <div>
              Start: {{ticket3.startDate}}
            </div>
            <div *ngIf="ticket3.endDate == null;else t3still_open">
              Abgeschlossen am: noch offen
            </div>
            <ng-template #t3still_open>Abgeschlossen am: {{ticket3.endDate}}</ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>

</ion-content>
